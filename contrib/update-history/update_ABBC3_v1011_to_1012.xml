<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http
://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.3.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		
		<title lang="en">Advanced BBCode Box 3 ( aka ABBC3 ) - Update to version 1.0.12</title>

		<description lang="en">See the main install file for any additional information about the MOD.</description>

		<author-notes lang="en"><![CDATA[This file provides instructions for upgrading ABBC3 MOD from version 1.0.11 to version 1.0.12
		
		You will have to make this change to ALL themes you have installed, based off Prosilver and Subsilver2.
	-------------------------------------------------------------------
	IMPORTANT !
	
	Before made any changes, makes sure your template is stored into "filesystem"
	    ACP -> STYLES -> STYLE COMPONENTS -> Templates : subsilver2 -> Details
	
	If you do not want to change from "Database" to "Filesystem",
	you must do next changes within your ACP :
	    ACP -> STYLES -> STYLE COMPONENTS -> Templates : subsilver2 -> Edit
	
	-------------------------------------------------------------------]]>
		</author-notes>
	
		<author-group>
			<author>
				<realname>Gabriel</realname>
				<username>leviatan21</username>
				<email>info@mssti.com</email>
				<homepage>http://www.mssti.com/phpbb3/</homepage>
				<contributions-group>
					<contributions status="current" from="2008-01-10" position="Developer"/>
				</contributions-group>
			</author>
		</author-group>
		
		<mod-version>1.0.12</mod-version>

		<installation>
			<level>easy</level>
			<time>1200</time>
			<target-version>3.0.5</target-version>
		</installation>

	</header>

	<action-group>
		
		<copy>
			<file from="root/abbcode_page.php" to="abbcode_page.php" />
			<file from="root/adm/style/*.*" to="adm/style/*.*" />
			<file from="root/images/*.*" to="images/*.*" />
			<file from="root/includes/*.*" to="includes/*.*" />
			<file from="root/install_abbc3.php" to="install_abbc3.php" />
			<file from="root/language/en/mods/*.*" to="language/en/mods/*.*" />
			<file from="root/styles/abbcode/*.*" to="styles/abbcode/*.*" />
			<file from="root/styles/prosilver/template/*.*" to="styles/prosilver/template/*.*" />
			<file from="root/styles/subsilver2/template/*.*" to="styles/subsilver2/template/*.*" />
		</copy>

		<open src="adm/style/acp_users_signature.html">

			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
		<!-- IF S_ABBC3_MOD -->
			<!-- INCLUDE posting_abbcode_buttons.html -->
		</div>
		<!-- ELSE -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
		<!-- IF S_ABBC3_MOD -->
			<!-- INCLUDE posting_abbcode_buttons.html -->
		</div>
		<!-- ELSE -->]]></action>
			</edit>

			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->

		<dl>

<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->

		<dl>

<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->]]></action>
			</edit>

			<edit>
				<find><![CDATA[<dd style="margin-left: 90px;"><textarea name="signature"]]></find>
				<inline-edit>
					<inline-find><![CDATA[name="signature"]]></inline-find>
					<inline-action type="before-add"><![CDATA[ id="signature" ]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[			<!-- ELSE -->
			<dt style="width:100%"><textarea name="signature" id="signature" rows="10" cols="60" style="width: 100%;height:300px" onselect="storeCaret(this);" onclick="storeCaret(this);" onkeyup="storeCaret(this);">{SIGNATURE}</textarea></dt>
			<!-- ENDIF -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[			<!-- ELSE -->
			<dt style="width: 100%;"><textarea name="signature" id="signature" rows="10" cols="60" style="width: 100%; height: 300px;" onselect="storeCaret(this);" onclick="storeCaret(this);" onkeyup="storeCaret(this);">{SIGNATURE}</textarea></dt>
			<!-- ENDIF -->
<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->]]></action>
			</edit>
		</open>

		<open src="adm/style/overall_header.html">
			<edit>
				<find>
&lt;!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start --&gt;

&lt;!-- IF S_ABBC3_MOD and ( S_BBCODE_ALLOWED or S_NEW_MESSAGE or S_EDIT_POST or S_VIEWTOPIC or S_DISPLAY_PREVIEW or S_POST_REVIEW or S_DISPLAY_REVIEW ) or ( U_MCP and ( U_MCP_POST or U_MCP_TOPIC or U_MCP_FORUM) ) or ( S_PRIVMSGS and S_VIEW_MESSAGE ) --&gt;
&lt;script type="text/javascript" src="{S_ABBC3_PATH}/abbcode.js" charset="{S_CONTENT_ENCODING}"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" /&gt;

&lt;!-- IF S_ABBC3_RESIZE --&gt;
&lt;script type="text/javascript" src="{S_ABBC3_PATH}/AdvancedBox.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
// &lt;![CDATA[
/** Image Resizer JS and AdvancedBox JS - Start **/
	var ImageResizerNumberOf			= '{L_ABBC3_RESIZE_NUMBER}';
	var ImageResizerNextAlt				= '{L_NEXT}';
	var ImageResizerPrevtAlt			= '{L_PREVIOUS}';
	var ImageResizerPlayAlt				= '{L_ABBC3_RESIZE_PLAY}';
	var ImageResizerPauseAlt			= '{L_ABBC3_RESIZE_PAUSE}';
	var ImageResizerZoomInAlt			= '{L_ABBC3_RESIZE_ZOOM_IN}';
	var ImageResizerZoomOutAlt			= '{L_ABBC3_RESIZE_ZOOM_OUT}';
	var ImageResizerCloseAlt			= '{L_ABBC3_RESIZE_CLOSE}';
	var ImageResizerBlankImage			= '{S_ABBC3_PATH}/advancedbox_blank.gif';
	var ImageResizerSignature			= '{S_ABBC3_RESIZE_SIGNATURE}';
	var ImageResizerMode				= '{S_ABBC3_RESIZE_METHOD}'; // 'advancedbox' 'pop-up' 'enlarge' 'samewindow' 'newwindow'
	var ImageResizerWarningImage		= '{S_ABBC3_PATH}/warning.gif';
	var ImageResizerMaxWidth			= '{S_ABBC3_MAX_IMG_WIDTH}' ;
	var ImageResizerMaxHeight			= '{S_ABBC3_MAX_IMG_HEIGHT}' ;
	var ImageResizerWarningSmall		= '{L_ABBC3_RESIZE_SMALL}';
	var ImageResizerWarningFullsize		= '{L_ABBC3_RESIZE_FULLSIZE}';
	var ImageResizerWarningFilesize		= '{L_ABBC3_RESIZE_FILESIZE}';
	var ImageResizerWarningNoFilesize	= '{L_ABBC3_RESIZE_NOFILESIZE}';
/** Image Resizer JS and AdvancedBox JS - End **/
// ]]&gt;
&lt;/script&gt;
&lt;!-- ENDIF --&gt;
&lt;!-- ENDIF --&gt;

&lt;!-- // MOD : MSSTI ABBC3 (V1.0.11) - End --&gt;
				</find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
<!-- INCLUDE abbcode_header.html -->
<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->]]></action>
			</edit>
		</open>

		<open src="adm/style/simple_header.html">
			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
<link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" />
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
<link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" />
<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->]]></action>
			</edit>
		</open>

		<open src="includes/bbcode.php">
			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
if (!class_exists('abbcode'))]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
if (!class_exists('abbcode'))]]></action>
			</edit>

			<edit>
				<find><![CDATA[class bbcode extends abbcode
// MOD : MSSTI ABBC3 (V1.0.11) - end]]></find>
				<action type="replace-with"><![CDATA[class bbcode extends abbcode
// MOD : MSSTI ABBC3 (V1.0.12) - end]]></action>
			</edit>

			<edit>
				<find><![CDATA[		$undid_bbcode_specialchars = false;]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start

		// Try to avoid duplicates anchor ID's inside quotes
		if ( preg_match('#\[quote(?:=&quot;(.*?)&quot;)?:' . $this->bbcode_uid . '\](.*?)?\[anchor(=(.*?)([\s]?))?#is', $message) )
		{
			$message = preg_replace('#(\[quote(?:=&quot;(.*?)&quot;)?:' . $this->bbcode_uid . '\](.*?))?\[anchor((=|)(.*?)([\s]))?#is',"$1[anchor$5quoted$6$7", $message);
		}
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
			$this->template_filename2 = $phpbb_root_path . 'styles/' . $user->theme['template_path'] . '/template/abbcode.html';]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
			$this->template_filename2 = $phpbb_root_path . 'styles/' . $user->theme['template_path'] . '/template/abbcode.html';]]></action>
			</edit>

			<edit>
				<find><![CDATA[}
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[}
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
			$sql .= ' AND bbcode_match <> "." ';
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[
// MOD : MSSTI ABBC3 (V1.0.12) - Start
			$sql .= ' AND bbcode_match <> "." ';
// MOD : MSSTI ABBC3 (V1.0.12) - End
]]></action>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
							'#\[url:$uid\](ed2k://\|(file|server|serverlist|friend)(|\|[^\\/\|:<>\*\?\"]+?)\|(.*?)\|/?)\[/url:$uid\]#sie'		=> "\$this->ed2k_pass( \$bbcode_id, '\$1', '' )",
							'#\[url=(ed2k://\|(file|server|serverlist|friend)(|\|[^\\/\|:<>\*\?\"]+?)\|(.*?)\|/?):$uid\](.*?)\[/url:$uid\]#sie'	=> "\$this->ed2k_pass( \$bbcode_id, '\$1', '\$5' )",
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
							'#\[url:$uid\](ed2k://\|(file|server|serverlist|friend)(|\|[^\\/\|:<>\*\?\"]+?)\|(.*?)\|/?)\[/url:$uid\]#sie'		=> "\$this->ed2k_pass( \$bbcode_id, '\$1', '' )",
							'#\[url=(ed2k://\|(file|server|serverlist|friend)(|\|[^\\/\|:<>\*\?\"]+?)\|(.*?)\|/?):$uid\](.*?)\[/url:$uid\]#sie'	=> "\$this->ed2k_pass( \$bbcode_id, '\$1', '\$5' )",
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
						$user->add_lang('mods/abbcode');
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[
// MOD : MSSTI ABBC3 (V1.0.12) - Start
						$user->add_lang('mods/abbcode');
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
			if (($tpl2 = file_get_contents($this->template_filename2)) === false)]]></find>
				<action type="replace-with"><![CDATA[
// MOD : MSSTI ABBC3 (V1.0.12) - Start
			if (($tpl2 = file_get_contents($this->template_filename2)) === false)]]></action>
			</edit>

			<edit>
				<find><![CDATA[}
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[}
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
			$this->template_filename2 = $phpbb_root_path . 'styles/' . $user->theme['template_path'] . '/template/abbcode.html';]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
			$this->template_filename2 = $phpbb_root_path . 'styles/' . $user->theme['template_path'] . '/template/abbcode.html';]]></action>
			</edit>

			<edit>
				<find><![CDATA[}
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[}
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>

		</open>

		<open src="includes/constants.php">
			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) Clicks Counter feature - Start
define('CLICKS_TABLE',				$table_prefix . 'clicks');
// MOD : MSSTI ABBC3 (V1.0.11) Clicks Counter feature - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) Clicks Counter feature - Start
define('CLICKS_TABLE',				$table_prefix . 'clicks');
// MOD : MSSTI ABBC3 (V1.0.12) Clicks Counter feature - End]]></action>
			</edit>
		</open>

 		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
	if ( @$config['ABBC3_MOD'] )
	{
		if (!class_exists('abbcode'))
		{
			include($phpbb_root_path . 'includes/abbcode.' . $phpEx);
		}
		$abbcode = new abbcode();
		$abbcode->abbcode_init();
	}
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
	// Safety check
	if ($config['ABBC3_MOD'] = (isset($config['ABBC3_MOD']) ? $config['ABBC3_MOD'] : false))
	{
		if (!class_exists('abbcode'))
		{
			include($phpbb_root_path . 'includes/abbcode.' . $phpEx);
		}
		$abbcode = new abbcode();
		$abbcode->abbcode_init();
	}
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>
		</open>

		<open src="includes/functions_display.php">
			<edit>
				<find><![CDATA[function display_custom_bbcodes()]]></find>
				<inline-edit>
					<inline-find><![CDATA[display_custom_bbcodes(]]></inline-find>
					<inline-action type="after-add"><![CDATA[ $abbc3 = true ]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
	global $phpbb_root_path, $phpEx, $config, $mode;

	if ( @$config['ABBC3_MOD'] )
	{
		if (!class_exists('abbcode'))
		{
			include($phpbb_root_path . 'includes/abbcode.' . $phpEx);]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
	global $config, $mode;

	if ( $abbc3 && @$config['ABBC3_MOD'] )
	{
		if (!class_exists('abbcode'))
		{
			global $phpbb_root_path, $phpEx;
			include($phpbb_root_path . 'includes/abbcode.' . $phpEx);]]></action>
			</edit>

			<edit>
				<find><![CDATA[	}
	else
	{]]></find>
				<action type="after-add"><![CDATA[		$template->assign_vars(array('S_ABBC3_DISABLED' => true));]]></action>
			</edit>

			<edit>
				<find><![CDATA[//	$sql = 'SELECT bbcode_id, bbcode_tag, bbcode_helpline
//		FROM ' . BBCODES_TABLE . '
//		WHERE display_on_posting = 1
//		ORDER BY bbcode_tag';
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>
		</open>

		<open src="includes/message_parser.php">
			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
			$sql .= ' WHERE bbcode_match <> "." ';
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
			$sql .= ' WHERE bbcode_match <> "." ';
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
		// Check ABBC3 groups permission
		foreach ($this->bbcodes as $bbcode_name => $bbcode_data)
		{
			if ( isset($bbcode_data['bbcode_group']) && $bbcode_data['bbcode_group'] != 0 && !$this->abbode_phpbb_auth( $bbcode_data['bbcode_group'] ) )
			{
				$this->bbcodes[$bbcode_name]['disabled'] = true;
			}
		}
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
		// Check ABBC3 groups permission
		foreach ($this->bbcodes as $bbcode_name => $bbcode_data)
		{
			if (isset($bbcode_data['bbcode_group']) && $bbcode_data['bbcode_group'] && !$this->abbode_phpbb_auth($bbcode_data['bbcode_group']))
			{
				$this->bbcodes[$bbcode_name]['disabled'] = true;
			}
		}
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>
		</open>

		<open src="includes/acp/acp_bbcodes.php">
			<edit>
			<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
					$sql = 'SELECT MAX(bbcode_order) as max_bbcode_order
						FROM ' . BBCODES_TABLE;
					$result = $db->sql_query($sql);
					$row = $db->sql_fetchrow($result);
					$db->sql_freeresult($result);
					$bbcode_order = $row['max_bbcode_order'] + 1;
					$sql_ary['bbcode_order'] = (int) $bbcode_order;
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
					$sql = 'SELECT MAX(bbcode_order) as max_bbcode_order
						FROM ' . BBCODES_TABLE;
					$result = $db->sql_query($sql);
					$row = $db->sql_fetchrow($result);
					$db->sql_freeresult($result);
					$bbcode_order = $row['max_bbcode_order'] + 1;
					$sql_ary['bbcode_order'] = (int) $bbcode_order;
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
			</edit>
		</open>

		<open src="language/en/acp/common.php">
			<edit>
				<find><![CDATA[// MOD : MSSTI ABBC3 (V1.0.11) - Start
$lang = array_merge($lang, array(
	'ACP_ABBCODES'				=> 'Advanced BBcodes Box 3',
	'ACP_ABBC3_SETTINGS'		=> 'ABBC3 Settings',
	'ACP_ABBC3_BBCODES'			=> 'ABBC3 BBCodes',
	'LOG_CONFIG_ABBCODES'		=> '<strong>Altered ABBC3 settings</strong>',
	'LOG_CONFIG_ABBCODES_ERROR'	=> '<strong>Error while save ABBC3 settings</strong>',
	'LOG_CONFIG_ADD'			=> '<strong>Added board settings</strong><br />» %s',
	'LOG_DATABASE_SCHEMA'		=> '<strong>Updating database schema</strong><br />» %s',
	'LOG_DELETE_ABBCODES'		=> '<strong>Deleted MOD ABBC3 from database</strong>',
));
// MOD : MSSTI ABBC3 (V1.0.11) - End]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 (V1.0.12) - Start
$lang = array_merge($lang, array(
	'ACP_ABBCODES'				=> 'Advanced BBcodes Box 3',
	'ACP_ABBC3_SETTINGS'		=> 'ABBC3 Settings',
	'ACP_ABBC3_BBCODES'			=> 'ABBC3 BBCodes',
	'LOG_CONFIG_ABBCODES'		=> '<strong>Altered ABBC3 settings</strong>',
	'LOG_CONFIG_ABBCODES_ERROR'	=> '<strong>Error while save ABBC3 settings</strong>',
	'LOG_CONFIG_ADD'			=> '<strong>Added board settings</strong><br />» %s',
	'LOG_DATABASE_SCHEMA'		=> '<strong>Updating database schema</strong><br />» %s',
	'LOG_DELETE_ABBCODES'		=> '<strong>Deleted MOD ABBC3 from database</strong>',
));
// MOD : MSSTI ABBC3 (V1.0.12) - End]]></action>
				<comment lang="en">See contrib/language folder for availables transtations</comment>
			</edit>
		</open>

		<open src="styles/prosilver/template/bbcode.html">
			<edit>
				<find><![CDATA[<!-- BEGIN img --><img src="{URL}" alt="{L_IMAGE}" /><!-- END img -->]]></find>
				<inline-edit>
					<inline-find><![CDATA[alt="{L_IMAGE}"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ class="resize_me"]]></inline-action>
				</inline-edit>
			</edit>
		</open>

		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find>&lt;!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start --&gt;

&lt;!-- IF S_ABBC3_MOD and ( S_BBCODE_ALLOWED or S_NEW_MESSAGE or S_EDIT_POST or S_VIEWTOPIC or S_DISPLAY_PREVIEW or S_POST_REVIEW or S_DISPLAY_REVIEW ) or ( U_MCP and ( U_MCP_POST or U_MCP_TOPIC or U_MCP_FORUM) ) or ( S_PRIVMSGS and S_VIEW_MESSAGE ) --&gt;
&lt;script type="text/javascript" src="{S_ABBC3_PATH}/abbcode.js" charset="{S_CONTENT_ENCODING}"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" /&gt;

&lt;!-- IF S_ABBC3_RESIZE --&gt;
&lt;script type="text/javascript" src="{S_ABBC3_PATH}/AdvancedBox.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
// &lt;![CDATA[
/** Image Resizer JS and AdvancedBox JS - Start **/
	var ImageResizerNumberOf			= '{L_ABBC3_RESIZE_NUMBER}';
	var ImageResizerNextAlt				= '{L_NEXT}';
	var ImageResizerPrevtAlt			= '{L_PREVIOUS}';
	var ImageResizerPlayAlt				= '{L_ABBC3_RESIZE_PLAY}';
	var ImageResizerPauseAlt			= '{L_ABBC3_RESIZE_PAUSE}';
	var ImageResizerZoomInAlt			= '{L_ABBC3_RESIZE_ZOOM_IN}';
	var ImageResizerZoomOutAlt			= '{L_ABBC3_RESIZE_ZOOM_OUT}';
	var ImageResizerCloseAlt			= '{L_ABBC3_RESIZE_CLOSE}';
	var ImageResizerBlankImage			= '{S_ABBC3_PATH}/advancedbox_blank.gif';
	var ImageResizerSignature			= '{S_ABBC3_RESIZE_SIGNATURE}';
	var ImageResizerMode				= '{S_ABBC3_RESIZE_METHOD}'; // 'advancedbox' 'pop-up' 'enlarge' 'samewindow' 'newwindow'
	var ImageResizerWarningImage		= '{S_ABBC3_PATH}/warning.gif';
	var ImageResizerMaxWidth			= '{S_ABBC3_MAX_IMG_WIDTH}' ;
	var ImageResizerMaxHeight			= '{S_ABBC3_MAX_IMG_HEIGHT}' ;
	var ImageResizerWarningSmall		= '{L_ABBC3_RESIZE_SMALL}';
	var ImageResizerWarningFullsize		= '{L_ABBC3_RESIZE_FULLSIZE}';
	var ImageResizerWarningFilesize		= '{L_ABBC3_RESIZE_FILESIZE}';
	var ImageResizerWarningNoFilesize	= '{L_ABBC3_RESIZE_NOFILESIZE}';
/** Image Resizer JS and AdvancedBox JS - End **/
// ]]&gt;
&lt;/script&gt;
&lt;!-- ENDIF --&gt;
&lt;!-- ENDIF --&gt;

&lt;!-- // MOD : MSSTI ABBC3 (V1.0.11) - End --&gt;
				</find>
				<action type="replace-with"><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.12) - Start -->
<!-- INCLUDE abbcode_header.html -->
<!-- // MOD : MSSTI ABBC3 (V1.0.12) - End -->]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/template/simple_header.html">
			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
<link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" />
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
<link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" />
<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/template/posting_buttons.html">
			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
<!-- IF S_ABBC3_MOD -->
	<!-- INCLUDE posting_abbcode_buttons.html -->
<!-- ELSE -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
<!-- IF S_ABBC3_MOD and not S_ABBC3_DISABLED -->
	<!-- INCLUDE posting_abbcode_buttons.html -->
<!-- ELSE -->
<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->]]></action>
			</edit>

			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
<!-- ENDIF -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
<!-- ENDIF -->
<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->]]></action>
			</edit>
		</open>

		<open src="styles/subsilver2/template/bbcode.html">
			<edit>
				<find><![CDATA[<!-- BEGIN img --><img src="{URL}" alt="{L_IMAGE}" /><!-- END img -->]]></find>
				<inline-edit>
					<inline-find><![CDATA[alt="{L_IMAGE}"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ class="resize_me"]]></inline-action>
				</inline-edit>
			</edit>
		</open>

		<open src="styles/subsilver2/template/overall_header.html">
			<edit>
				<find>&lt;!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start --&gt;

&lt;!-- IF S_ABBC3_MOD and ( S_BBCODE_ALLOWED or S_NEW_MESSAGE or S_EDIT_POST or S_VIEWTOPIC or S_DISPLAY_PREVIEW or S_POST_REVIEW or S_DISPLAY_REVIEW ) or ( U_MCP and ( U_MCP_POST or U_MCP_TOPIC or U_MCP_FORUM) ) or ( S_PRIVMSGS and S_VIEW_MESSAGE ) --&gt;
&lt;script type="text/javascript" src="{S_ABBC3_PATH}/abbcode.js" charset="{S_CONTENT_ENCODING}"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" /&gt;

&lt;!-- IF S_ABBC3_RESIZE --&gt;
&lt;script type="text/javascript" src="{S_ABBC3_PATH}/AdvancedBox.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
// &lt;![CDATA[
/** Image Resizer JS and AdvancedBox JS - Start **/
	var ImageResizerNumberOf			= '{L_ABBC3_RESIZE_NUMBER}';
	var ImageResizerNextAlt				= '{L_NEXT}';
	var ImageResizerPrevtAlt			= '{L_PREVIOUS}';
	var ImageResizerPlayAlt				= '{L_ABBC3_RESIZE_PLAY}';
	var ImageResizerPauseAlt			= '{L_ABBC3_RESIZE_PAUSE}';
	var ImageResizerZoomInAlt			= '{L_ABBC3_RESIZE_ZOOM_IN}';
	var ImageResizerZoomOutAlt			= '{L_ABBC3_RESIZE_ZOOM_OUT}';
	var ImageResizerCloseAlt			= '{L_ABBC3_RESIZE_CLOSE}';
	var ImageResizerBlankImage			= '{S_ABBC3_PATH}/advancedbox_blank.gif';
	var ImageResizerSignature			= '{S_ABBC3_RESIZE_SIGNATURE}';
	var ImageResizerMode				= '{S_ABBC3_RESIZE_METHOD}'; // 'advancedbox' 'pop-up' 'enlarge' 'samewindow' 'newwindow'
	var ImageResizerWarningImage		= '{S_ABBC3_PATH}/warning.gif';
	var ImageResizerMaxWidth			= '{S_ABBC3_MAX_IMG_WIDTH}' ;
	var ImageResizerMaxHeight			= '{S_ABBC3_MAX_IMG_HEIGHT}' ;
	var ImageResizerWarningSmall		= '{L_ABBC3_RESIZE_SMALL}';
	var ImageResizerWarningFullsize		= '{L_ABBC3_RESIZE_FULLSIZE}';
	var ImageResizerWarningFilesize		= '{L_ABBC3_RESIZE_FILESIZE}';
	var ImageResizerWarningNoFilesize	= '{L_ABBC3_RESIZE_NOFILESIZE}';
/** Image Resizer JS and AdvancedBox JS - End **/
// ]]&gt;
&lt;/script&gt;
&lt;!-- ENDIF --&gt;
&lt;!-- ENDIF --&gt;

&lt;!-- // MOD : MSSTI ABBC3 (V1.0.11) - End --&gt;
				</find>
				<action type="replace-with"><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.12) - Start -->
<!-- INCLUDE abbcode_header.html -->
<!-- // MOD : MSSTI ABBC3 (V1.0.12) - End -->]]></action>
			</edit>
		</open>

		<open src="styles/subsilver2/template/posting_buttons.html">
			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
	<!-- IF S_ABBC3_MOD -->
		<!-- INCLUDE posting_abbcode_buttons.html -->
	<!-- ELSE -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
	<!-- IF S_ABBC3_MOD and not S_ABBC3_DISABLED -->
		<!-- INCLUDE posting_abbcode_buttons.html -->
	<!-- ELSE -->
<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->]]></action>
			</edit>

			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->

<!-- ENDIF -->
	</td>
</tr>

<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
<!-- IF not S_ABBC3_MOD -->]]></find>
				<action type="replace-with"><![CDATA[<!-- MOD : MSSTI ABBC3 (V1.0.12) - End //-->

<!-- ENDIF -->
	</td>
</tr>

<!-- MOD : MSSTI ABBC3 (V1.0.12) - Start //-->
<!-- IF not S_ABBC3_MOD or S_ABBC3_DISABLED -->]]></action>
			</edit>
		</open>

		<open src="styles/subsilver2/template/posting_body.html">
			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
	<!-- IF S_ABBC3_MOD -->
			<td valign="top" style="width: 100%;"><textarea id="message" name="message" rows="15" cols="76" tabindex="3" onselect="storeCaret(this);" onclick="storeCaret(this);" onkeyup="storeCaret(this);" style="width: 99%;">{MESSAGE}</textarea></td>
	<!-- ELSE -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[]]></action>
				<comment lang="en">NOTE: just delete the code</comment>
			</edit>

			<edit>
				<find><![CDATA[<!-- ENDIF -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[]]></action>
				<comment lang="en">NOTE: just delete the code</comment>
			</edit>
		</open>

		<open src="styles/subsilver2/template/ucp_profile_signature.html">
			<edit>
				<find><![CDATA[<!-- // MOD : MSSTI ABBC3 (V1.0.11) - Start -->
	<!-- IF S_ABBC3_MOD -->
				<td colspan="2"><textarea class="post" id="signature" name="signature" rows="10" cols="76" style="width: 99%;" onselect="storeCaret(this);" onclick="storeCaret(this);" onkeyup="storeCaret(this);">{SIGNATURE}</textarea></td>
	<!-- ELSE -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[]]></action>
				<comment lang="en">NOTE: just delete the code</comment>
			</edit>

			<edit>
				<find><![CDATA[<textarea class="post" name="signature"]]></find>
				<inline-edit>
					<inline-find><![CDATA[name="signature"]]></inline-find>
					<inline-action type="before-add"><![CDATA[ id="signature" ]]></inline-action>
				</inline-edit>

				<inline-edit>
					<inline-find><![CDATA[90%]]></inline-find>
					<inline-action type="replace-with"><![CDATA[99%]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[<!-- ENDIF -->
<!-- // MOD : MSSTI ABBC3 (V1.0.11) - End -->]]></find>
				<action type="replace-with"><![CDATA[]]></action>
				<comment lang="en">NOTE: just delete the code</comment>
			</edit>
		</open>

		<diy-instructions lang="en"><![CDATA[IMPORTANT !

You can safety delete :
root/abbcode_functions.php
root/images/demo1.flv
root/files/demo1.flv

OVERWRITE all your previous files with the new ones!

Please make sure of it, some FTP programs don't do it fine.

Makes sure you follow the DIY instruction in the main Install_ABBC3_v1012.xml file.
]]>
		</diy-instructions>

	</action-group>
</mod>