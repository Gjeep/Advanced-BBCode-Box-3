<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http
://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.3.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>

		<title lang="en">Advanced BBCode Box 3 (aka ABBC3)</title>

		<description lang="en">ABBC3 MOD adds lots of useful BBCode features and makes the bbcode buttons look just like Microsoft Office.
		It also improves the functions of phpBB's BBCode function.
		It adds the bbcode exactly where the cursor is, inserts smilies where the cursor is, and adds more ways to customize posts. 
		The MOD is very fast loading, and is a sleek addition to your phpBB bulletin board. You must have javascript enabled to use this MOD.</description>

		<author-notes lang="en"><![CDATA[-------------------------------------------------------------------
	To read more about ABBC3, please read the contrib/docs/README.HTML file

	-------------------------------------------------------------------
	Please do not remove the copyright notices and the link to www.mssti.com
	If you refuse to this, will not get support from me.

	-------------------------------------------------------------------
	Once you finish the install, please take your time to read the the contrib folder content.

	-------------------------------------------------------------------
	This MOD works in pbpBB 3.0.6 only !

	-------------------------------------------------------------------
	Tested on Windows Browsers:
		- Internet Explorer 7.0
		- Mozilla Firefox 2.0 & 3.0
		- Opera 9.60
		- Safari 3.0
		- Netscape 8.1
		- Chrome 1.0

	-------------------------------------------------------------------]]></author-notes>

		<author-group>
			<author>
				<realname>Gabriel</realname>
				<username>leviatan21</username>
				<email>info@mssti.com</email>
				<homepage>http://www.mssti.com/phpbb3/</homepage>
				<contributions-group>
					<contributions status="current" from="2008-01-10" position="Developer"/>
				</contributions-group>
			</author>
		</author-group>

		<mod-version>3.0.6</mod-version>

		<installation>
			<level>intermediate</level>
			<time>1200</time>
			<target-version>3.0.6</target-version>
		</installation>

		<history>
			<entry>
				<date>2009-06-01</date>
				<rev-version>3.0.6</rev-version>
				<changelog lang="en">
					<change> [Change] From now ABBC3 will follow the phpbb Version numbering.</change>
					<change> [Change] Languages es_ar with es</change>
					<change> [Change] Re-write Simple upload function and fix some spaces in the template posting_abbcode_wizards.html</change>
					<change> [Change] Language string for Simple upload files</change>
					<change> [Change] Improve fade bbcode</change>
					<change> [Change] Function for remove bbcode </change>

					<change> [Feature] Updated to phpbb version 3.0.6 </change>
					<change> [Feature] Added the README.HTML document into the contrib/docs folder</change>
					<change> [Feature] Install Compatible with AutoMOD</change>
					<change> [Feature] Added new Web video to bbvideo bbcode : badr.tv</change>
					<change> [Feature] Added Add-on : Hide image when resize.</change>

					<change> [Fix] Several minor bugs </change>
					<change> [Fix] Follow coding-guidelines </change>
					<change> [Fix] Small fixes and changes in some bbcode </change>
					<change> [Fix] Link to ED2k Stats </change>
					<change> [Fix] Some bbcodes: spoil, hidden, simpleTabs, image, thumbnails</change>
					<change> [Fix] Thumbnail forced resize</change>
					<change> [Fix] Some bbvideos : photobucket.com, flv</change>
					<change> [Fix] For re-parse function </change>
					<change> [Fix] Gradient minimum error "undefined"</change>
					<change> [Fix] Mouse position after cut and remove</change>
				</changelog>
			</entry>

			<entry>
				<date>2009-06-01</date>
				<rev-version>1.0.12</rev-version>
				<changelog lang="en">
					<change> See full history in contrib/docs/README.HTML file</change>
				</changelog>
			</entry>
		</history>

		<link-group>
			<link type="template" href="contrib/subsilver2.xml" lang="en">Template : Changes for Subsilver2 based off style</link>
			<link type="contrib" href="contrib/update_ABBC3_v1012_to_306.xml" lang="en">Update : This file provides instructions for upgrading the MOD from version 1.0.12 to 3.0.6</link>
			<link type="contrib" href="contrib/add-on_MSSTI_ABBC3_hide_image_when_resize.xml" lang="en">Add-on : Hide image when resize.</link>
			<link type="contrib" href="contrib/add-on_MSSTI_ABBC3_with_Evil_Quick_Replyv101.xml" lang="en">Add-on : This file provides instructions for use Evil Quick Reply v1.0.1 with ABBC3</link>
			<link type="contrib" href="contrib/add-on_MSSTI_ABBC3_button_over_effect.xml" lang="en">Add-on : This file provides instructions for how to change mouse over ABBC3 buttons</link>
			<link type="contrib" href="contrib/add-on_MSSTI_ABBC3_ED2K_add-on.xml" lang="en">Add-on : This file provides instructions for install 2 add-on for ed2k in your forum.</link>
			<link type="contrib" href="contrib/add-on_MSSTI_ABBC3_how-to-add-a-new-bbcode-icon.xml" lang="en">How to add : This tutorial is for explain how to add a new icon and bbcode to ABBC3</link>
		</link-group>
	</header>

	<action-group>

		<copy>
			<file from="root/abbcode_page.php" to="abbcode_page.php" />
			<file from="root/adm/style/*.*" to="adm/style/*.*" />
			<file from="root/images/*.*" to="images/*.*" />
			<file from="root/includes/*.*" to="includes/*.*" />
			<file from="root/install_abbc3.php" to="install_abbc3.php" />
			<file from="root/language/en/mods/*.*" to="language/en/mods/*.*" />
			<file from="root/styles/abbcode/*.*" to="styles/abbcode/*.*" />
			<file from="root/styles/prosilver/template/*.*" to="styles/prosilver/template/*.*" />
		</copy>

		<open src="adm/style/acp_users_signature.html">
			<edit>
				<find><![CDATA[		<div id="format-buttons">]]></find>
				<action type="after-add"><![CDATA[<!-- MOD : MSSTI ABBC3 - Start //-->
		<!-- IF S_ABBC3_MOD -->
			<!-- INCLUDE posting_abbcode_buttons.html -->
		</div>
		<!-- ELSE -->]]></action>
			</edit>

			<edit>
				<find><![CDATA[		<dl>]]></find>
				<action type="replace-with"><![CDATA[		<!-- ENDIF -->
<!-- MOD : MSSTI ABBC3 - End //-->

		<dl>

<!-- MOD : MSSTI ABBC3 - Start //-->
			<!-- IF not S_ABBC3_COLOR -->]]></action>
			</edit>

			<edit>
				<find><![CDATA[<dd style="margin-left: 90px;"><textarea name="signature"]]></find>
				<inline-edit>
					<inline-find><![CDATA[name="signature"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ id="signature"]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[			<dd style="margin-left: 90px; margin-top: 5px;">]]></find>
				<action type="before-add"><![CDATA[			<!-- ELSE -->
			<dt style="width: 100%;"><textarea name="signature" id="signature" rows="10" cols="60" style="width: 100%; height: 300px;" onselect="storeCaret(this);" onclick="storeCaret(this);" onkeyup="storeCaret(this);">{SIGNATURE}</textarea></dt>
			<!-- ENDIF -->
<!-- MOD : MSSTI ABBC3 - End //-->]]></action>
			</edit>
		</open>

		<open src="adm/style/overall_header.html">
			<edit>
				<find><![CDATA[</head>]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - Start //-->
<!-- INCLUDE abbcode_header.html -->
<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - End //-->]]></action>
			</edit>
		</open>

		<open src="adm/style/simple_header.html">
			<edit>
				<find><![CDATA[</head>]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - Start //-->
<link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" />
<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - End //-->]]></action>
			</edit>
		</open>

		<open src="includes/bbcode.php">
			<edit>
				<find><![CDATA[/**
* BBCode class
* @package phpBB3
*/
class bbcode]]></find>
				<action type="replace-with"><![CDATA[// MOD : MSSTI ABBC3 - Start
if (!class_exists('abbcode'))
{
	include($phpbb_root_path . 'includes/abbcode.' . $phpEx);
}
/**
* BBCode class
* @package phpBB3
*/
// class bbcode
class bbcode extends abbcode
// MOD : MSSTI ABBC3 - end]]></action>
			</edit>

			<edit>
				<find><![CDATA[		$undid_bbcode_specialchars = false;]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI ABBC3 - Start

		// Try to avoid duplicates anchor ID's inside quotes
		if (preg_match('#\[quote(?:=&quot;(.*?)&quot;)?:' . $this->bbcode_uid . '\](.*?)?\[anchor(=(.*?)([\s]?))?#is', $message))
		{
			$message = preg_replace('#(\[quote(?:=&quot;(.*?)&quot;)?:' . $this->bbcode_uid . '\](.*?))?\[anchor((=|)(.*?)([\s]))?#is',"$1[anchor$5quoted$6$7", $message);
		}
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[				else
				{
					trigger_error('The file ' . $this->template_filename . ' is missing.', E_USER_ERROR);
				}
			}
]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
			$this->template_filename2 = $phpbb_root_path . 'styles/' . $user->theme['template_path'] . '/template/abbcode.html';
			
			if (!@file_exists($this->template_filename2))
			{
				if (isset($user->theme['template_inherits_id']) && $user->theme['template_inherits_id'])
				{
					$this->template_filename2 = $phpbb_root_path . 'styles/' . $user->theme['template_inherit_path'] . '/template/abbcode.html';
					if (!@file_exists($this->template_filename2))
					{
						trigger_error('The file ' . $this->template_filename2 . ' is missing.', E_USER_ERROR);
					}
				}
				else
				{
					trigger_error('The file ' . $this->template_filename2 . ' is missing.', E_USER_ERROR);
				}
			}
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[			$sql = 'SELECT *
				FROM ' . BBCODES_TABLE . '
				WHERE ' . $db->sql_in_set('bbcode_id', $sql);]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
			$sql .= ' AND bbcode_match <> "." ';
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[							'#\[url:$uid\]((.*?))\[/url:$uid\]#s'			=> $this->bbcode_tpl('url', $bbcode_id),]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
							'#\[url:$uid\](ed2k://\|(file|server|serverlist|friend)(|\|[^\\/\|:<>\*\?\"]+?)\|(.*?)\|/?)\[/url:$uid\]#sie'		=> "\$this->ed2k_pass( \$bbcode_id, '\$1', '' )",
							'#\[url=(ed2k://\|(file|server|serverlist|friend)(|\|[^\\/\|:<>\*\?\"]+?)\|(.*?)\|/?):$uid\](.*?)\[/url:$uid\]#sie'	=> "\$this->ed2k_pass( \$bbcode_id, '\$1', '\$5' )",
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[						// Replace {L_*} lang strings]]></find>
				<action type="after-add"><![CDATA[
// MOD : MSSTI ABBC3 - Start
						$user->add_lang('mods/abbcode');
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[				'img'		=> '<img src="$1" alt="' . $user->lang['IMAGE'] . '" />',]]></find>
				<inline-edit>
					<inline-find><![CDATA[ />',]]></inline-find>
					<inline-action type="before-add"><![CDATA[ class="resize_me"]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[			if (($tpl = file_get_contents($this->template_filename)) === false)
			{
				trigger_error('Could not load bbcode template', E_USER_ERROR);
			}]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
			if (($tpl2 = file_get_contents($this->template_filename2)) === false)
			{
				trigger_error('Could not load abbcode template', E_USER_ERROR);
			}
			else
			{
				$tpl .= $tpl2;
			}
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>
      	</open>

		<open src="includes/constants.php">
			<edit>
				<find><![CDATA[// Additional tables]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI ABBC3 Clicks Counter feature - Start
define('CLICKS_TABLE',				$table_prefix . 'clicks');
// MOD : MSSTI ABBC3 Clicks Counter feature - End]]></action>
			</edit>
		</open>

		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[	// The following assigns all _common_ variables that may be used at any point in a template.]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
	// Safety check
	if ($config['ABBC3_MOD'] = (isset($config['ABBC3_MOD']) ? $config['ABBC3_MOD'] : false))
	{
		if (!class_exists('abbcode'))
		{
			include($phpbb_root_path . 'includes/abbcode.' . $phpEx);
		}
		$abbcode = new abbcode();
		$abbcode->abbcode_init();
	}
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>
		</open>

		<open src="includes/functions_display.php">
			<edit>
				<find><![CDATA[function display_custom_bbcodes()]]></find>
				<inline-edit>
					<inline-find><![CDATA[display_custom_bbcodes(]]></inline-find>
					<inline-action type="after-add"><![CDATA[$abbc3 = true]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[	$num_predefined_bbcodes = 22;]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
	global $config, $mode;

	if ($abbc3 && @$config['ABBC3_MOD'])
	{
		if (!class_exists('abbcode'))
		{
			global $phpbb_root_path, $phpEx;
			include($phpbb_root_path . 'includes/abbcode.' . $phpEx);
		}
		$abbcode = new abbcode();
		$abbcode->abbcode_init();
		$abbcode->abbcode_display( $mode );

		$sql = 'SELECT bbcode_id, bbcode_tag, bbcode_helpline
			FROM ' . BBCODES_TABLE . '
			WHERE display_on_posting = 1 AND abbcode = 0 AND bbcode_image = "" 
			ORDER BY bbcode_tag';
	}
	else
	{
		$template->assign_vars(array('S_ABBC3_DISABLED' => true));]]></action>
			</edit>

			<edit>
				<find><![CDATA[		WHERE display_on_posting = 1]]></find>
				<inline-edit>
					<inline-find><![CDATA[display_on_posting = 1]]></inline-find>
					<inline-action type="after-add"><![CDATA[ AND abbcode = 0 ]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[	$result = $db->sql_query($sql);]]></find>
				<action type="before-add"><![CDATA[
	}
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>
		</open>

		<open src="includes/message_parser.php">
			<edit>
				<find><![CDATA[			$sql = 'SELECT *
				FROM ' . BBCODES_TABLE;]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
			$sql .= ' WHERE bbcode_match <> "." ';
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[				'bbcode_id'	=> (int) $row['bbcode_id'],]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
				'bbcode_group'	=> $row['bbcode_group'],
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[		// Parse smilies]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
		// Check ABBC3 groups permission
		foreach ($this->bbcodes as $bbcode_name => $bbcode_data)
		{
			if (isset($bbcode_data['bbcode_group']) && $bbcode_data['bbcode_group'] && !$this->abbode_phpbb_auth($bbcode_data['bbcode_group']))
			{
				$this->bbcodes[$bbcode_name]['disabled'] = true;
			}
		}
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>
		</open>

		<open src="includes/acp/acp_bbcodes.php">
			<edit>
				<find><![CDATA[			case 'edit':
				$sql = 'SELECT bbcode_match, bbcode_tpl, display_on_posting, bbcode_helpline
					FROM ' . BBCODES_TABLE . '
					WHERE bbcode_id = ' . $bbcode_id;]]></find>
				<inline-edit>
					<inline-find><![CDATA[, bbcode_helpline]]></inline-find>
					<inline-action type="after-add"><![CDATA[, abbcode ]]></inline-action>
				</inline-edit>
				<inline-edit>
					<inline-find><![CDATA[$bbcode_id]]></inline-find>
					<inline-action type="after-add"><![CDATA[ . ' and abbcode = 0']]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[			case 'modify':
				$sql = 'SELECT bbcode_id, bbcode_tag
					FROM ' . BBCODES_TABLE . '
					WHERE bbcode_id = ' . $bbcode_id;]]></find>
				<inline-edit>
					<inline-find><![CDATA[, bbcode_tag]]></inline-find>
					<inline-action type="after-add"><![CDATA[, abbcode ]]></inline-action>
				</inline-edit>
				<inline-edit>
					<inline-find><![CDATA[$bbcode_id]]></inline-find>
					<inline-action type="after-add"><![CDATA[ . ' and abbcode = 0']]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[					$sql_ary['bbcode_id'] = (int) $bbcode_id;]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
						$sql = 'SELECT MAX(bbcode_order) as max_bbcode_order
							FROM ' . BBCODES_TABLE;
						$result = $db->sql_query($sql);
						$row = $db->sql_fetchrow($result);
						$db->sql_freeresult($result);
						$bbcode_order = $row['max_bbcode_order'] + 1;
						$sql_ary['bbcode_order'] = (int) $bbcode_order;
// MOD : MSSTI ABBC3 - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[			case 'delete':

				$sql = 'SELECT bbcode_tag
					FROM ' . BBCODES_TABLE . "
					WHERE bbcode_id = $bbcode_id";]]></find>
				<inline-edit>
					<inline-find><![CDATA[bbcode_tag]]></inline-find>
					<inline-action type="after-add"><![CDATA[, abbcode ]]></inline-action>
				</inline-edit>
				<inline-edit>
					<inline-find><![CDATA[$bbcode_id"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ . ' and abbcode = 0' ]]></inline-action>
				</inline-edit>
			</edit>

			<edit>
				<find><![CDATA[		$sql = 'SELECT *
			FROM ' . BBCODES_TABLE . '
			ORDER BY bbcode_tag';]]></find>
				<inline-edit>
					<inline-find><![CDATA[ORDER BY bbcode_tag';]]></inline-find>
					<inline-action type="before-add"><![CDATA[WHERE abbcode = 0 ]]></inline-action>
				</inline-edit>
			</edit>
		</open>

		<open src="includes/acp/acp_styles.php">
			<edit>
				<find><![CDATA[				if ($file[0] != '.' && strtoupper($file) != 'CVS' && !is_file($dir . '/' . $file) && !is_link($dir . '/' . $file))]]></find>
				<inline-edit>
					<inline-find><![CDATA[ && !is_link($dir . '/' . $file)]]></inline-find>
					<inline-action type="after-add"><![CDATA[ && $file != 'abbcode']]></inline-action>
				</inline-edit>
			</edit>
		</open>

		<open src="language/en/acp/common.php">
			<edit>
				<find><![CDATA[?>]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI ABBC3 - Start
$lang = array_merge($lang, array(
	'ACP_ABBCODES'				=> 'Advanced BBcodes Box 3',
	'ACP_ABBC3_SETTINGS'		=> 'ABBC3 Settings',
	'ACP_ABBC3_BBCODES'			=> 'ABBC3 BBCodes',
	'LOG_CONFIG_ABBCODES'		=> '<strong>Altered ABBC3 settings</strong>',
	'LOG_CONFIG_ABBCODES_ERROR'	=> '<strong>Error while save ABBC3 settings</strong>',
	'LOG_CONFIG_ADD'			=> '<strong>Added board settings</strong><br />» %s',
	'LOG_DATABASE_SCHEMA'		=> '<strong>Updating database schema</strong><br />» %s',
	'LOG_DELETE_ABBCODES'		=> '<strong>Deleted MOD ABBC3 from database</strong>',
));
// MOD : MSSTI ABBC3 - End]]></action>
				<comment lang="en">See contrib/language folder for availables transtations</comment>
			</edit>
		</open>

		<open src="styles/prosilver/template/attachment.html">
			<edit>
				<find><![CDATA[{_file.L_DOWNLOAD_COUNT}" /></a></dt>]]></find>
				<inline-edit>
					<inline-find><![CDATA[{_file.L_DOWNLOAD_COUNT}"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ class="attach_parent"]]></inline-action>
				</inline-edit>
				<comment lang="en">You will have to make this change to ALL themes you have installed, based off Prosilver. I use "Prosilver" as an example.
				IMPORTANT !
				
				Before made any changes, makes sure your template is stored into "filesystem"
				ACP -> STYLES -> STYLE COMPONENTS -> Templates : prosilver -> Details
				
				If you do not want to change from "Database" to "Filesystem", you must do next changes within your ACP :
				ACP -> STYLES -> STYLE COMPONENTS -> Templates : prosilver -> Edit
				</comment>
			</edit>

			<edit>
				<find><![CDATA[onclick="viewableArea(this);" /></dt>]]></find>
				<inline-edit>
					<inline-find><![CDATA["viewableArea(this);"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ class="attach_me"]]></inline-action>
				</inline-edit>
			</edit>
		</open>

		<open src="styles/prosilver/template/bbcode.html">
			<edit>
				<find><![CDATA[<!-- BEGIN img --><img src="{URL}" alt="{L_IMAGE}" /><!-- END img -->]]></find>
				<inline-edit>
					<inline-find><![CDATA[alt="{L_IMAGE}"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ class="resize_me"]]></inline-action>
				</inline-edit>
			</edit>
		</open>

		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find><![CDATA[</head>]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - Start //-->
<!-- INCLUDE abbcode_header.html -->
<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - End //-->]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/template/simple_header.html">
			<edit>
				<find><![CDATA[</head>]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - Start //-->
<link rel="stylesheet" type="text/css" media="all" href="{S_ABBC3_PATH}/abbcode.css" />
<!-- MOD : MSSTI ABBC3 {S_ABBC3_VERSION} - End //-->]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/template/posting_buttons.html">
			<edit>
				<find><![CDATA[<div id="format-buttons">]]></find>
				<action type="after-add"><![CDATA[<!-- MOD : MSSTI ABBC3 - Start //-->
<!-- IF S_ABBC3_MOD and not S_ABBC3_DISABLED -->
	<!-- INCLUDE posting_abbcode_buttons.html -->
<!-- ELSE -->
<!-- MOD : MSSTI ABBC3 - End //-->]]></action>
			</edit>

			<edit>
				<find><![CDATA[</div>
<!-- ENDIF -->]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : MSSTI ABBC3 - Start //-->
<!-- ENDIF -->
<!-- MOD : MSSTI ABBC3 - End //-->]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/theme/stylesheet.css">
			<edit>
				<find><![CDATA[@import url("colours.css");]]></find>
				<action type="after-add"><![CDATA[/** MOD : MSSTI ABBC3 Quote block fix - Start **/
blockquote { background-image: none; }
blockquote div cite { margin-left: 0px; padding-left: 20px; background-image: url("{T_THEME_PATH}/images/quote.gif"); background-position: 0 3px; background-repeat: no-repeat; }
blockquote.uncited { background-image: url("{T_THEME_PATH}/images/quote.gif"); background-position: 6px 8px; background-repeat: no-repeat; }
/** MOD : MSSTI ABBC3 Quote block fix - End **/]]></action>
				<comment lang="en">This addon is optional -
				You can add it at the bottom of the file</comment>
			</edit>
		</open>

		<diy-instructions lang="en"><![CDATA[IMPORTANT ! 

#####################################################################
Log on to Administration Control Panel

#####################################################################
A) Disable your board :

	A.1) Navigate to General Tab -> Board settings 
	A.2) look at "Disable board: This will make the board unavailable to users. 
	You can also enter a short (255 character) message to display if you wish." 
	A.3) Change to "yes"
	A.4) Submit to save setting.

#####################################################################
B) Database update :

	B.1) Once all the files have been modified and uploaded to your site,
	you should point your browser at this location with the addition 
	of /install_abbc3.php
	For example if your domain name is www.mydomain.tld and you placed phpBB3 
	in a directory /phpBB3 off your web root you would enter 
	http://www.mydomain.tld/phpBB3/install_abbc3.php into your browser.
	B.2) When you have done this you should see the phpBB3 ABBC3 Installation screen appear, follow the instructions.
	If the installation was successful, you can now use your forum.
	Congratulations, you have installed phpBB3 ABBC3 successfully. 
	But there is still work ahead!
	B.3) You should remove/rename the install file (root/install_abbc3.php) 
	from your server.

#####################################################################
C) Refresh the templates :

	C.1) Navigate to "Styles" Tab.
	C.2) Under "Style components " click on "Templates".
	C.3) Under "Actions" click on "Refresh".
	C.4) in the next screen, click on "Yes" ( Repeat last 2 steps to each instaled style ).

#####################################################################
D) Purge the cache :

	D.1) Navigate to General Tab
	D.2) look at Purge the cache
	D.3) Click on "Run Now" button at right
	D.4) in the next screen, click on "Yes"

#####################################################################
E) Enable your board :

	E.1) Navigate to General Tab -> Board settings 
	E.2) look at "Disable board: This will make the board unavailable to users. 
	You can also enter a short (255 character) message to display if you wish." 
	E.3) Change to "NO"
	E.4) Submit to save setting.

#####################################################################
F) Change the value that best suits your needs

	F.1) Navigate to Posting Tab
	F.2) At the left menu you will find a new category "Advanced BBcodes Box 3"
	F.3) ABBC3 settings : Here you can determine the basic operation of ABBC3, 
	enable or disable, and among other settings adjust the default values for the background.
	F.4) ABBC3 BBCodes : From this page you can alter the order of tags on posting page or edit the icons,

#####################################################################
H) Enjoy it !.]]>
		</diy-instructions>
	</action-group>
</mod>
